<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HZFarm — защищённые GET-запросы</title>
  <link rel="stylesheet" href="css/test-client.css" />
</head>
<body>
  <header class="page-header">
    <h1>HZFarm • Защищённые GraphQL Query (GET)</h1>
    <div class="page-header__subtitle">Страница доступна только после аутентификации. Все запросы выполняются с токенами безопасности.</div>
  </header>

  <main class="layout-grid">
    <section class="card card--span-4">
      <div class="card__title">Контекст сессии</div>
      <div class="field">
        <label for="baseUrl">BASE URL</label>
        <input id="baseUrl" type="text" data-el="base-input" placeholder="https://hzfarm.ru" />
      </div>
      <div class="divider-dashed"></div>
      <div class="field">
        <label>Сервер</label>
        <div class="info-line">
          <span class="tag">URL</span>
          <strong data-el="base-display"></strong>
        </div>
      </div>
      <div class="field">
        <label>accessToken</label>
        <div class="info-line">
          <span data-el="token-preview">(нет)</span>
        </div>
      </div>
      <div class="field">
        <label>CSRF token</label>
        <div class="info-line">
          <span data-el="csrf-value">(нет)</span>
        </div>
      </div>
      <p class="notice">Для корректной работы убедитесь, что cookies с access/refresh и XSRF установлены.</p>
    </section>

    <section class="card card--span-8">
      <div class="card__title">Базовые запросы</div>
      <div class="card__subtitle">Каждая кнопка отправляет GraphQL запрос методом GET.</div>
      <div class="button-row">
        <button class="btn" type="button" data-el="query-player" data-loading-text="Загружаем…">getPlayer</button>
        <button class="btn" type="button" data-el="query-player-houses" data-loading-text="Загружаем…">getPlayerHouses</button>
        <button class="btn" type="button" data-el="query-houses-cfg" data-loading-text="Загружаем…">getHousesInfoCfg</button>
        <button class="btn" type="button" data-el="query-logic-cfg" data-loading-text="Загружаем…">getGameLogicCfg</button>
      </div>
      <div class="section-divider"></div>
      <fieldset>
        <legend>Работа с конкретным домом</legend>
        <div class="field">
          <label for="houseSelect">Выберите дом</label>
          <select id="houseSelect" data-el="houses-select">
            <option value="">(нет данных)</option>
          </select>
        </div>
        <div class="button-row">
          <button class="btn" type="button" data-el="load-houses" data-loading-text="Обновляем…">Обновить список домов</button>
          <button class="btn" type="button" data-el="query-house" data-loading-text="Загружаем…">getHouse</button>
        </div>
      </fieldset>
    </section>

    <section class="card card--span-12">
      <div class="card__title">Ответ</div>
      <pre class="log-area" data-el="result">—</pre>
    </section>

    <section class="card card--span-12">
      <div class="card__title">Лог действий</div>
      <pre class="log-area" data-el="log"></pre>
    </section>
  </main>

  <script type="module" src="js/pages/secure-queries-page.js"></script>
</body>
</html>
